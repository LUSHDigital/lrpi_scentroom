(this["webpackJsonplush-file-uploader"]=this["webpackJsonplush-file-uploader"]||[]).push([[0],{11:function(e,t,n){e.exports=n(19)},17:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(2),o=n(4),i=n(3),c=n(5),s=n(0),l=n.n(s),u=n(10),f=n.n(u);n(8),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var d=n(6),p=n.n(d),m=n(7),h=(n(17),{TEST_START:0,TEST_IN_PROGRESS:1,TEST_KILL:2}),T=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={runTest:!1},n.sendCommand=function(e){if(e===h.TEST_START){var t=n.props.endpoint+"/test-start";fetch(t,{method:"GET"}).catch((function(e){return console.log(e)})),n.setState({runTest:!0})}else if(e===h.TEST_KILL){var a=n.props.endpoint+"/test-kill";fetch(a,{method:"GET"}).catch((function(e){return console.log(e)})),n.setState({runTest:!1})}},n.triggerTest=function(e){e===h.TEST_START?(console.log("Test running!"),n.sendCommand(e)):e===h.TEST_KILL&&(console.log("End of test..."),n.sendCommand(e))},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{onTouchStart:function(){return e.triggerTest(h.TEST_START)},onTouchEnd:function(){return e.triggerTest(h.TEST_KILL)},onMouseDown:function(){return e.triggerTest(h.TEST_START)},onMouseUp:function(){return e.triggerTest(h.TEST_KILL)},className:"inputbtn"},this.state.runTest?l.a.createElement("span",null,"Release to end"):l.a.createElement("span",null,"Press + hold to test")))}}]),t}(l.a.Component),E=(n(18),function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).openNotification=function(e){n.setState({isActive:!0,message:e}),n.timer=window.setTimeout((function(){n.setState({isActive:!1,message:""})}),1e4)},n.state={timer:null,isActive:!1,message:""},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return this.state.isActive?l.a.createElement("div",{className:"notification"},l.a.createElement("div",{className:"notification-body"},this.state.message)):null}}]),t}(s.PureComponent)),b="dev"===Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_STAGE?"http://192.168.0.56:5000":window.location.origin,v=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).notificationRef=l.a.createRef(),n.fileChangeHandler=function(e){var t=e.target.files[0];n.setState({selectedFile:t})},n.colorChangeHandler=function(e){var t=e.target.value;n.setState({selectedCol:t})},n.handleSubmit=function(e){e.preventDefault();var t=new FormData;t.append("file",n.state.selectedFile),t.append("colour",n.state.selectedCol),n.notificationManager("Loading.. await response"),n.submitData(t)},n.distanceHandlerActive=function(){n.notificationManager("Test request activated"),n.startTest(!0)},n.distanceHandlerDeactive=function(){n.notificationManager("Test request deactivated"),n.startTest(!1)},n.startTest=function(e){n.endPointRequest(e).then((function(e){200===e?n.notificationManager("Test success"):n.notificationManager("Test failed")})).catch((function(e){n.notificationManager("Error: Test failed ",e.message)}))},n.endPointRequest=function(){var e=Object(m.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="",""===(n=t?"http://192.168.0.56:5000/start-test":"http://192.168.0.56:5000/test-kill")){e.next=9;break}return e.next=5,fetch(n,{headers:{"Content-Type":"application/json"}});case 5:return a=e.sent,e.next=8,a.response;case 8:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.submitData=function(e){n.uploadFile(e).then((function(t){n.uploadCol(e).then((function(e){200===t&&200===e?n.notificationManager("Upload success"):200===t&&200!==e?n.notificationManager("Error: Colour upload failed"):200!==t&&200===e?n.notificationManager("Error: File upload failed"):n.notificationManager("Error: Upload failed")})).catch((function(e){n.notificationManager("Error: Colour upload failed ",e.message)}))})).catch((function(e){n.notificationManager("Error: File upload failed ",e.message)}))},n.uploadFile=function(){var e=Object(m.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://192.168.0.56:5000/uploadfile",e.next=3,fetch("http://192.168.0.56:5000/uploadfile",{method:"POST",body:t});case 3:return n=e.sent,e.next=6,n.response;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.uploadCol=function(){var e=Object(m.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://192.168.0.56:5000/uploadcol",e.next=3,fetch("http://192.168.0.56:5000/uploadcol",{method:"POST",body:t});case 3:return n=e.sent,e.next=6,n.response;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={selectedFile:null,selectedCol:"#011993"},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"notificationManager",value:function(e){this.notificationRef.current.openNotification(e)}},{key:"render",value:function(){return l.a.createElement("div",{className:"form_body"},l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("label",null,"Select Music File"),l.a.createElement("br",null),l.a.createElement("input",{type:"file",id:"fileinput",name:"file",accept:".mp3,.mp4;",onChange:this.fileChangeHandler}),l.a.createElement("br",null),l.a.createElement("label",null,"Select Colour"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("input",{type:"color",name:"colour",onChange:this.colorChangeHandler,value:this.state.selectedCol})," ",l.a.createElement("br",null),l.a.createElement("input",{type:"submit",value:"Upload",className:"inputbtn"})),l.a.createElement("div",{className:"test-button"},l.a.createElement(T,{endpoint:b})),l.a.createElement("br",null),l.a.createElement("button",{className:"tempSensorBtn",onClick:this.distanceHandlerActive}," Activate test"),l.a.createElement("button",{className:"tempSensorBtn",onClick:this.distanceHandlerDeactive}," Deactivate test"),l.a.createElement("br",null),l.a.createElement(E,{ref:this.notificationRef}))}}]),t}(l.a.Component),g=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"layout_header"},l.a.createElement("h1",null,"ScentRoom Uploader")),l.a.createElement(v,null))}}]),t}(l.a.Component);f.a.render(l.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},8:function(e,t,n){}},[[11,1,2]]]);
//# sourceMappingURL=main.36141495.chunk.js.map